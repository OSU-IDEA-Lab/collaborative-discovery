{% load static %}

<!DOCTYPE html>

<html>
<head>
  <title>VarClean</title>
  <link rel="stylesheet" type="text/css" href="{% static 'datacleaner/css/style.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'datacleaner/css/bootstrap.css' %}">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="{% static 'datacleaner/js/bootstrap.js' %}"></script>


  <script>
  function confirmRestart() {
    return confirm("Are you sure you want to restart the cleaning process?");
  }

  function resetData() {
    $('#dataSample').html(
      '<thead>'
      + '<tr>'
        {% for field in header %}
        + '<th scope="col">{{ field }}</th>'
        {% endfor %}
      + '</tr>'
    + '</thead>'
    + '<tbody>'
      {% for row in data %}
      + '<tr>'
        {% for field in row %}
          + '<td>{{ field }}</td>'
        {% endfor %}
      + '</tr>'
      {% endfor %}
    + '</tbody>'
    );
  }
  </script>

</head>
<body>
  <div class="header" id="header">
    <h1 class="title">VarClean</h1>
    <div class="dropdown-divider"></div>
  </div>
  <div class="top-level">
    <!--<form onsubmit="return confirmRestart()" action="{% url 'datacleaner:index' %}">-->
    <div class="restart-btn-section">
      <button type="button" class="btn btn-danger restart-btn" data-toggle="modal" data-target="#confirmRestartModal">Restart</button>
    </div>
    <!--</form>-->
    <div class="export-btn-section">
      <div class="btn btn-primary export-btn">Export to CSV</div>
    </div>
  </div>
  <div class="middle-action-btn-section">
    <div class="btn-undo">
      <div class="btn btn-light disabled">
        Undo
        <img src="{% static 'datacleaner/images/corner-up-left.svg' %}">
      </div>
    </div>
    <div class="btn-redo">
      <div class="btn btn-light disabled">
        <img src="{% static 'datacleaner/images/corner-up-right.svg' %}">
        Redo
      </div>
    </div>
  </div>
  <div class="site-body">
    <div class="left-bar">
      <div class="key-box">
        <h5><strong><u>Key</u></strong></h5>
        <div>Unmarked cells are clean</div>
        <div>Dirty cells:</div>
        <div class="dirty-color-line"></div>
        <div class="dirty-color-line-labels">
          <div class="less"><small>Less valuable to fix</small></div>
          <div class="more"><small>More valuable to fix</small></div>
        </div>
      </div>
      <div class="repairs-applied-box">
        <h5><strong><u>Repairs Applied</u></strong></h5>
        <div id="currentRepairList">No repairs applied yet</div>
      </div>
    </div>
    <div class="result-content">
      <table class="table table-bordered" id="dataSample">
        <thead>
          <tr>
            {% for field in header %}
              <th scope="col">{{ field }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for row in data %}
            <tr>
              {% for field in row %}
                <td>
                  <div class="data-cell">
                    <span>{{ field.cellValue }}</span>
                    {% if field.dirtiness > 0 %}
                      <div class="dirtiness-circle">
                        <img
                        {% if field.dirtiness == 1 %}
                        src="{% static 'datacleaner/images/dirty-circle-1.svg' %}"
                        {% elif field.dirtiness == 2 %}
                        src="{% static 'datacleaner/images/dirty-circle-2.svg' %}"
                        {% elif field.dirtiness == 3 %}
                        src="{% static 'datacleaner/images/dirty-circle-3.svg' %}"
                        {% elif field.dirtiness == 4 %}
                        src="{% static 'datacleaner/images/dirty-circle-4.svg' %}"
                        {% elif field.dirtiness == 5 %}
                        src="{% static 'datacleaner/images/dirty-circle-5.svg' %}"
                        {% elif field.dirtiness == 6 %}
                        src="{% static 'datacleaner/images/dirty-circle-6.svg' %}"
                        {% elif field.dirtiness == 7 %}
                        src="{% static 'datacleaner/images/dirty-circle-7.svg' %}"
                        {% elif field.dirtiness == 8 %}
                        src="{% static 'datacleaner/images/dirty-circle-8.svg' %}"
                        {% elif field.dirtiness == 9 %}
                        src="{% static 'datacleaner/images/dirty-circle-9.svg' %}"
                        {% elif field.dirtiness == 10 %}
                        src="{% static 'datacleaner/images/dirty-circle-10.svg' %}"
                        {% endif %}
                        alt="L{{ field.dirtiness}}" width="15">
                      </div>
                    {% endif %}
                  </div>
                </td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="modal fade" id="confirmRestartModal" tabindex="-1" role="dialog" aria-labelledby="confirmRestartModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Are you sure you want to restart? Your progress will be lost.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
          <button type="submit" class="btn btn-primary" data-dismiss="modal" onclick="resetData()">Yes</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
